:root{
  --bg:#050607;
  --panel:#0b0d10cc;
  --panel2:#0b0d10f2;
  --stroke: rgba(255,255,255,.08);
  --text:#f2f3f5;
  --muted:#b9bec6;
  --red:#ff2a2a;
  --red2:#ff4d4d;
  --shadow: 0 22px 90px rgba(0,0,0,.65);
  --r: 22px;
}

/* ===== YekanBakh (Local) ===== */
@font-face{
  font-family:"YekanBakh";
  src:url("assets/fonts/YekanBakh-Regular.woff2") format("woff2");
  font-weight:400;
  font-style:normal;
  font-display:swap;
}
@font-face{
  font-family:"YekanBakh";
  src:url("assets/fonts/YekanBakh-Bold.woff2") format("woff2");
  font-weight:700;
  font-style:normal;
  font-display:swap;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:"YekanBakh", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(900px 600px at 70% 10%, rgba(255,42,42,.16), transparent 60%),
    radial-gradient(700px 500px at 10% 85%, rgba(255,77,77,.10), transparent 60%),
    linear-gradient(180deg, #040405, #06080a 65%, #050607);
  color:var(--text);
  overflow-x:hidden;
  -webkit-tap-highlight-color: transparent;
}

/* canvases */
#bg3d, #game3d{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:block;
}
#bg3d{ z-index:-4; }
#game3d{
  z-index:-5;
  opacity:0;
  pointer-events:none;
}

/* fx */
.fxNoise{
  position:fixed; inset:0;
  z-index:-3;
  pointer-events:none;
  opacity:.10;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  background-size: 180px 180px;
  mix-blend-mode: overlay;
}
.fxVignette{
  position:fixed; inset:0;
  z-index:-2;
  pointer-events:none;
  background: radial-gradient(closest-side, rgba(0,0,0,0), rgba(0,0,0,.65));
  opacity:.95;
}

/* ===== League Screen (Mobile-first) ===== */
.wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 14px 12px 22px;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.top{ display:flex; flex-direction:column; gap:10px; }

.brand{
  display:flex;
  gap:12px;
  align-items:center;
  padding: 12px;
  border-radius: var(--r);
  background: rgba(10,12,14,.55);
  border: 1px solid rgba(255,42,42,.16);
  box-shadow: 0 0 0 1px rgba(0,0,0,.35) inset;
  backdrop-filter: blur(10px);
}
.brandLogo{
  width:54px; height:54px;
  border-radius: 18px;
  display:grid; place-items:center;
  background: rgba(255,42,42,.08);
  border: 1px solid rgba(255,42,42,.18);
  box-shadow: 0 0 30px rgba(255,42,42,.14);
  flex: 0 0 auto;
}
.brandLogo img{
  width:40px; height:auto;
  filter: drop-shadow(0 0 14px rgba(255,42,42,.35));
}
.brandTitle{ font-weight:700; font-size:16px; }
.brandSub{ color:var(--muted); font-size:12px; margin-top:2px; }

.metaRow{
  display:flex;
  flex-direction:column;
  gap:10px;
}

.pill{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 12px;
  border-radius: 18px;
  background: rgba(10,12,14,.55);
  border: 1px solid rgba(255,42,42,.16);
  backdrop-filter: blur(10px);
  color: rgba(242,243,245,.9);
  font-weight:700;
  font-size:12px;
}
.pillDot{
  width:10px; height:10px; border-radius:50%;
  background: radial-gradient(circle, var(--red), rgba(255,42,42,.18));
  box-shadow: 0 0 18px rgba(255,42,42,.45);
  animation: blink 1.2s ease-in-out infinite;
}
@keyframes blink{
  0%,100%{ opacity:.55; transform:scale(.95); }
  50%{ opacity:1; transform:scale(1.05); }
}

.countdown{
  padding: 10px 12px;
  border-radius: 18px;
  background: rgba(10,12,14,.55);
  border: 1px solid rgba(255,42,42,.16);
  backdrop-filter: blur(10px);
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
}
.cdLabel{ color:var(--muted); font-size:12px; font-weight:700; }
.cdValue{ font-size:14px; font-weight:700; letter-spacing:.2px; }

.card{
  background: linear-gradient(180deg, rgba(10,12,14,.86), rgba(6,8,10,.78));
  border: 1px solid var(--stroke);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 12px;
  backdrop-filter: blur(12px);
}

.cardHead{
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:stretch;
  margin-bottom:10px;
}
.cardTitle{ font-weight:700; font-size:14px; }

.btnGhost{
  border: 1px solid rgba(255,42,42,.22);
  background: rgba(255,42,42,.06);
  color: var(--text);
  padding: 12px 12px;
  border-radius: 18px;
  cursor:pointer;
  transition: transform .14s ease, box-shadow .2s ease, border-color .2s ease;
}
.btnGhost:hover{ transform: translateY(-1px); border-color: rgba(255,42,42,.34); box-shadow: 0 0 24px rgba(255,42,42,.12); }
.btnGhost:active{ transform: translateY(0); }

.leaderboard{
  max-height: 52vh;
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap:10px;
  padding: 10px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(0,0,0,.18);
}
.leaderboard::-webkit-scrollbar{ width:10px; }
.leaderboard::-webkit-scrollbar-thumb{
  background: linear-gradient(180deg, rgba(255,42,42,.22), rgba(255,77,77,.18));
  border-radius: 20px;
}

.row{
  display:grid;
  grid-template-columns: 52px 1fr 110px;
  gap:10px;
  align-items:center;
  padding: 12px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.08);
  background: rgba(10,12,14,.58);
  transition: transform .14s ease, box-shadow .2s ease, border-color .2s ease;
}
.row:hover{
  transform: translateY(-1px);
  border-color: rgba(255,42,42,.16);
  box-shadow: 0 0 22px rgba(255,42,42,.10);
}
.rank{ text-align:center; font-weight:700; color: rgba(242,243,245,.75); }
.badge{
  width:34px; height:34px;
  border-radius: 14px;
  display:grid; place-items:center;
  margin:0 auto;
  font-weight:700;
  background: rgba(255,42,42,.10);
  border: 1px solid rgba(255,42,42,.22);
  box-shadow: 0 0 24px rgba(255,42,42,.14);
}

.user{ min-width:0; display:flex; flex-direction:column; gap:2px; }
.handle{
  font-weight:700;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.name{
  font-size:12px;
  color: var(--muted);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.score{
  text-align:left;
  font-weight:700;
}
.score span{
  font-size:12px;
  color: rgba(242,243,245,.72);
  margin-right:6px;
}

.row.top1{ border-color: rgba(255,42,42,.38); }
.row.top2{ border-color: rgba(255,77,77,.28); }
.row.top3{ border-color: rgba(255,42,42,.20); }

.cardFoot{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:12px;
}
.hint{ color: var(--muted); font-size:12px; }

.btnPrimary{
  position:relative;
  border:none;
  width:100%;
  border-radius: 20px;
  padding: 14px 14px;
  cursor:pointer;
  background: linear-gradient(90deg, rgba(255,42,42,.22), rgba(255,77,77,.14));
  border: 1px solid rgba(255,42,42,.22);
  box-shadow: 0 18px 70px rgba(0,0,0,.55);
  overflow:hidden;
  transition: transform .14s ease, box-shadow .2s ease, border-color .2s ease;
}
.btnPrimary:hover{ transform: translateY(-2px); border-color: rgba(255,42,42,.32); box-shadow: 0 24px 90px rgba(0,0,0,.65); }
.btnPrimary:active{ transform: translateY(0); }
.btnPrimaryText{ display:block; font-weight:700; font-size:16px; }
.btnPrimarySub{ display:block; margin-top:2px; font-size:12px; color: rgba(242,243,245,.78); }
.btnPrimaryGlow{
  position:absolute;
  inset:-45%;
  background: conic-gradient(from 180deg,
    transparent 0 20%,
    rgba(255,42,42,.26) 30%,
    rgba(255,77,77,.16) 46%,
    transparent 60% 100%
  );
  filter: blur(10px);
  animation: spin 2.8s linear infinite;
  opacity:.95;
}
@keyframes spin{ to{ transform: rotate(360deg); } }

.foot{
  margin-top:auto;
  text-align:center;
  padding-top:8px;
  color: rgba(185,190,198,.85);
  font-size: 11px;
  letter-spacing:.6px;
}

/* ===== Game UI ===== */
.gameUI{
  position:fixed; inset:0;
  z-index:50;
  pointer-events:none;
}
.hidden{ display:none !important; }

.gameActive #game3d{
  z-index:20;
  opacity:1;
  pointer-events:auto;
}
.gameActive #leagueScreen,
.gameActive #bg3d,
.gameActive .fxNoise,
.gameActive .fxVignette{
  opacity:0;
  pointer-events:none;
}

.hud{
  display:flex;
  gap:10px;
  padding: 12px;
}
.hudBox{
  flex:1;
  min-width: 110px;
  border-radius: 18px;
  padding:10px 12px;
  background: rgba(10,12,14,.55);
  border: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 70px rgba(0,0,0,.45);
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
}
.hudBox span{ font-size:12px; color: var(--muted); font-weight:700; }
.hudBox b{ font-size:16px; font-weight:700; }

.toast{
  width: fit-content;
  margin: 0 auto;
  padding: 10px 14px;
  border-radius: 18px;
  background: rgba(0,0,0,.30);
  border: 1px solid rgba(255,42,42,.18);
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 70px rgba(0,0,0,.55);
  font-weight:700;
  opacity:0;
  transform: translateY(-6px);
}

.touchZones{
  position:absolute; inset:0;
  display:grid;
  grid-template-columns: 1fr 1fr;
  pointer-events:auto;
}
.zone{ opacity:0; }

.endModal{
  position:absolute; inset:0;
  display:grid;
  place-items:center;
  background: rgba(0,0,0,.52);
  backdrop-filter: blur(10px);
  pointer-events:auto;
}
.endCard{
  width:min(520px, 92vw);
  border-radius: 22px;
  padding: 14px;
  background: linear-gradient(180deg, rgba(10,12,14,.92), rgba(6,8,10,.86));
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 24px 100px rgba(0,0,0,.72);
}
.endTitle{ font-weight:700; font-size:16px; margin-bottom:10px; }
.endStats{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  margin-bottom: 12px;
}
.stat{
  padding:12px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap:10px;
}
.stat span{ color: var(--muted); font-size:12px; font-weight:700; }
.stat b{ font-size:18px; font-weight:700; }

.endBtns{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.endBtns .btnGhost{ flex:1; }
.endBtns .btnPrimary{ flex:1; min-width: 220px; }

.endHint{
  margin-top:10px;
  font-size:12px;
  color: var(--muted);
  text-align:center;
}

/* Desktop tweak */
@media (min-width:720px){
  .metaRow{ flex-direction:row; }
  .cardHead{ flex-direction:row; align-items:center; justify-content:space-between; }
  .btnGhost{ width:auto; }
  .cardFoot{ flex-direction:row; align-items:center; justify-content:space-between; }
  .btnPrimary{ width:auto; min-width: 280px; }
}
